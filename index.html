<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Assigning an agent — please wait</title>
<meta name="robots" content="noindex">
<style>
body{font-family:system-ui,Arial,sans-serif;background:radial-gradient(circle at 20% 20%, #0f0c29, #302b63, #24243e);background-image:url('https://images.unsplash.com/photo-1535223289827-42f1e9919769?auto=format&fit=crop&w=1500&q=80');background-size:cover;background-position:center;color:#e0f2fe;display:flex;align-items:center;justify-content:center;height:100vh;margin:0;overflow:hidden}
.overlay{position:fixed;top:0;left:0;right:0;bottom:0;background:rgba(0,0,0,0.6);z-index:0}
.card{position:relative;z-index:1;background:rgba(15,23,42,0.85);padding:32px;border-radius:16px;box-shadow:0 0 40px rgba(0,255,255,0.3);max-width:620px;width:94%;text-align:center;backdrop-filter:blur(8px)}
h1{margin:0 0 8px;font-size:22px;color:#7dd3fc;text-shadow:0 0 10px #0ea5e9}
.count{font-weight:700;font-size:42px;margin:16px 0;color:#f472b6;text-shadow:0 0 15px #f472b6}
.small{font-size:14px;color:#a5b4fc}
button{border:none;padding:12px 18px;border-radius:10px;cursor:pointer;margin-top:14px;font-size:15px;transition:all .3s ease}
#manual{background:linear-gradient(90deg,#06b6d4,#3b82f6);color:white;box-shadow:0 0 15px #3b82f6}
#manual[disabled]{opacity:.5;cursor:not-allowed;box-shadow:none}
#telegram{background:linear-gradient(90deg,#ec4899,#8b5cf6);color:white;box-shadow:0 0 15px #a855f7;margin-left:8px}
.progress{height:10px;background:#1e293b;border-radius:999px;margin-top:12px;overflow:hidden}
.bar{height:100%;width:0%;background:linear-gradient(90deg,#34d399,#06b6d4);box-shadow:0 0 20px #06b6d4}
</style>
</head>
<body>
<div class="overlay"></div>
<div class="card" role="main" aria-live="polite">
  <h1>Please wait — assigning an available WhatsApp agent</h1>
  <p class="small">This helps distribute chats fairly. Do not close this page.</p>
  <div class="count" id="count">60</div>
  <div class="progress" aria-hidden="true"><div id="bar" class="bar"></div></div>
  <p id="status" class="small">You will be redirected when the timer ends.</p>
  <button id="manual" disabled>Redirect now (disabled)</button>
  <button id="telegram">Contact on Telegram</button>
  <p class="small" style="margin-top:10px">If auto-redirect fails, please check your network or try again later.</p>
</div>
<script>
const ENCRYPTED_BLOBS = ["2QIEndNXltBTcFYh4DM8r+BvoOdrSGEV", "qX/hEtosDf9IqTzpkE7XIe0YP894nw3f", "fEpWUCH1uI7uPuVpRXthYBfFjL/bDNBR", "w87Kr5ilkK7oaTyL+v/znKCVpp3QUAq+", "+7xyw8VeaNeMNfduwo1F9fFtUeG1BMBc", "1iaXTPPcbA1cYIJW7xeudcrtXzlvVbNn", "xR57AQ+vajyGCxTC/C9CMzqWXQ20MiD3", "QqXhfQS9WqZhpMore5TYTjaJaJVTl/wf", "umBARwq8jTCoAKFWg1F2dD2IvwCYNpBg", "THb6xdLK1ikuqDwqdUfC9+Hy4B4WkAse", "xr8xQqqjksDqQ4cb/44Ie5uTqvfbd7Mo", "ZPYWzrXXpbJeElnQXccv/Y3nk4FmK2/l", "LREdtByoPzI9nAjMFCAqgSqfCgUKpTz6", "iB+QZCUzTBmkmcmCsS6oXBYDdC6Uqf+x", "OaBYtUJBWKh+chGOAJFhh3d4b5lMSyW7", "p0+iJjvYdPYuEDFOnn6bFA7hQ8ccKQV7", "aFosm+dpZ3uBahjLUWsUqdRRUUy5Ui//", "dewunReXXf+E4xg6TN0XpCaka8+92iwP", "MxFHku1Z/O0VCWC8CiB/o9tpzNwlPVaM", "Gc/QVQdj6tjMZQmSIP7oZDVb3+37VDin", "GBoP1NpRtZluLEBnISs25+NohqxeHXVe", "7afi4GXXzBhoiszL1JbV2V3m/Slas/r4", "a3N29Q5j1kcdMracUkJPxDda5X4lBoGp", "OoFBzlJ9Ck58APCMA7B2+2RKP3lLOcS6", "0XyXFAkAnKwR+i5a6E2gJzgxrZgjyxlj", "pPb+YetRQM7asgrsncfGVd1pcP3ugzzV", "Ms9Ed/RnvYlkKrKEC/59TsVUi7ldE4ax", "Y8jsJhNMfSSXpnbGWvnUFyF0SBGgl0fz", "vgq2M3wyFA0uGYrfhzuOAkoCJDweLbzv", "zn9Hrzi9KB96pCXW905wnw6NGCxCnBTg", "ZYhpTVAu016MATnWXLlffmca4W68Nwjg", "QZJJ2CXnX74mlWyHeKN+7hHRb4gRrFu1", "ZYPiyXfhqyfY3qPDXLLV/0PSkhHh75Tx", "BWdH4OC7cJwErFP8PFZ/1dKKRK8wnGPF", "kv5mdk3HyUdo4/4Fq89fQX3w/HZa08oz", "jOH0XmnueDjnBVEgtdDMZ17cTQzTM2MQ", "f1ocK8KYqVA1tugFRmslGPCtmWEFg9g9", "DFB0l0JeTdJ+bGE1NWFNp3ttfeROXFkE", "E1bINxdeCqCSiTJZKmf/BCZvO5SguAVg", "ItWoaeDrScAiP7DCG+SfWdbbffEXDYX6", "fK3lVcieifMXYqc/RZzcbPyqvsohW5AM", "FFHdZmtK0EYAyc7WLWDkVlJ54HAw+fbn", "PaHHkBfGkysf+ABeBJD/pyH0phIryTJu", "XAnRbm67MsA+XfXNZTjoWFiNCvkGZcP1", "v4Txy5e00XKx3gUihrXG/6SC6UuE5jEW"];

function b64ToUint8Array(b64){ const bin = atob(b64); const len = bin.length; const arr = new Uint8Array(len); for(let i=0;i<len;i++) arr[i]=bin.charCodeAt(i); return arr; }

function decryptXor(blobB64){
  const raw = b64ToUint8Array(blobB64);
  const half = Math.floor(raw.length/2);
  const ks = raw.slice(0, half);
  const ct = raw.slice(half);
  const pt = new Uint8Array(ct.length);
  for(let i=0;i<ct.length;i++) pt[i]=ct[i]^ks[i];
  return new TextDecoder().decode(pt);
}

(function(){
  const rawNums = ENCRYPTED_BLOBS.map(b=>decryptXor(b));
  const seen = new Set();
  const numbers = [];
  for(const r of rawNums){
    const d = (r||'').replace(/\D+/g,'');
    if(d && !seen.has(d)){ seen.add(d); numbers.push(d); }
  }

  const TOTAL = 6;
  let remaining = TOTAL;
  const countEl = document.getElementById('count');
  const barEl = document.getElementById('bar');
  const statusEl = document.getElementById('status');
  const manualBtn = document.getElementById('manual');
  const telegramBtn = document.getElementById('telegram');

  telegramBtn.addEventListener('click', ()=>{ window.open('https://t.me/Easytaskearnig','_blank'); });

  function updateUI(){
    countEl.textContent = remaining;
    const pct = Math.round(((TOTAL - remaining)/TOTAL)*100);
    barEl.style.width = pct+'%';
    if(remaining<=0){ countEl.textContent='0'; barEl.style.width='100%'; }
  }

  async function performRedirect(){
    try{
      if(!Array.isArray(numbers) || numbers.length===0){
        statusEl.textContent='No agent numbers configured — please contact support.';
        manualBtn.disabled = true;
        return;
      }
      statusEl.textContent = 'Selecting an agent now…';
      const pick = numbers[Math.floor(Math.random()*numbers.length)];
      const safe = pick.replace(/\D+/g,'');
      if(!safe){ statusEl.textContent='Invalid agent number — please contact support.'; return; }
      setTimeout(()=>{ window.location.replace('https://wa.me/'+safe); }, 600);
    }catch(e){ console.error(e); statusEl.textContent='An error occurred — please try again.'; }
  }

  manualBtn.addEventListener('click', ()=>{
    remaining = 0;
    clearInterval(timer);
    updateUI();
    manualBtn.disabled = true;
    performRedirect();
  });

  updateUI();
  const timer = setInterval(()=>{
    remaining--;
    updateUI();
    if(remaining<=0){ clearInterval(timer); manualBtn.disabled = true; performRedirect(); } else {
      if(remaining<=5) manualBtn.disabled = false;
      statusEl.textContent = 'Please wait — assigning an agent…';
    }
  },1000);

})();
</script>
</body>
</html>
